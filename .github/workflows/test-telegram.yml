name: ğŸ“± Test Telegram

on:
  workflow_dispatch:  # Solo ejecuciÃ³n manual

permissions:
  contents: read

jobs:
  test-telegram:
    runs-on: ubuntu-latest
    timeout-minutes: 5
    steps:
      - name: ğŸ“¥ Checkout
        uses: actions/checkout@v4
      
      - name: ğŸ Setup Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'
      
      - name: ğŸ“¦ Install dependencies
        run: pip install requests
      
      - name: ğŸ“± Test Telegram Connection
        env:
          TELEGRAM_API: ${{ secrets.TELEGRAM_API }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
        run: |
          echo "ğŸ§ª Ejecutando test de Telegram..."
          python test_telegram.py
          
          if [ $? -eq 0 ]; then
            echo "âœ… Test completado exitosamente"
          else
            echo "âŒ Test fallÃ³ - revisa los logs arriba"
            exit 1
          fi
